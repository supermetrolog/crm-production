(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58f3e4ca"],{"921a":function(e,t,c){"use strict";c.r(t);var n=c("7a23"),a={class:"all"},r={class:"row no-gutters search-main-container"},o={class:"container py-3"},l={class:"col-12 search-container"},j=Object(n["j"])("hr",null,null,-1),s={class:"row no-gutters companies-actions"},i={class:"col-6"},b=Object(n["j"])("p",{class:"d-inline"},"Вид:",-1),O=Object(n["j"])("i",{class:"fas fa-th-list"},null,-1),u=Object(n["j"])("i",{class:"fas fa-th"},null,-1),d={class:"col-6 text-right"},p={class:"row no-gutters mt-2"},m={class:"col-12 companies-list-container"},f={key:3,class:"text-center text-dark py-5"};function y(e,t,c,y,h,g){var v=Object(n["E"])("CompanyForm"),C=Object(n["E"])("Search"),k=Object(n["E"])("Loader"),w=Object(n["E"])("CompanyGridView"),I=Object(n["E"])("CompanyTableView");return Object(n["y"])(),Object(n["f"])("div",a,[h.companyFormVisible?(Object(n["y"])(),Object(n["f"])(v,{key:0,onCloseCompanyForm:g.clickCloseCompanyForm,onCreated:g.createdCompany},null,8,["onCloseCompanyForm","onCreated"])):Object(n["g"])("",!0),Object(n["j"])("div",r,[Object(n["j"])("div",o,[Object(n["j"])("div",l,[Object(n["j"])(C,{onSearch:g.clickSearch},null,8,["onSearch"])])])]),j,Object(n["j"])("div",s,[Object(n["j"])("div",i,[b,Object(n["j"])("button",{class:["btn btn-action text-dark",{active:!h.viewMode}],onClick:t[1]||(t[1]=function(e){return h.viewMode=!1})},[O],2),Object(n["j"])("button",{class:["btn btn-action text-primary",{active:h.viewMode}],onClick:t[2]||(t[2]=function(e){return h.viewMode=!0})},[u],2)]),Object(n["j"])("div",d,[Object(n["j"])("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=function(e){return h.companyFormVisible=!0})}," Создать компанию ")])]),Object(n["j"])("div",p,[Object(n["j"])("div",m,[h.loader?(Object(n["y"])(),Object(n["f"])(k,{key:0})):Object(n["g"])("",!0),h.viewMode?(Object(n["y"])(),Object(n["f"])(w,{key:1,companies:this.COMPANIES},null,8,["companies"])):(Object(n["y"])(),Object(n["f"])(I,{key:2,companies:this.COMPANIES},null,8,["companies"])),this.COMPANIES[0]||h.loader?Object(n["g"])("",!0):(Object(n["y"])(),Object(n["f"])("h1",f," НИЧЕГО НЕ НАЙДЕНО "))])])])}var h=c("1da1"),g=c("5530"),v=(c("96cf"),c("a73e")),C={class:"company-table-view"},k=Object(n["j"])("thead",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,"#id"),Object(n["j"])("th",{class:"text-left"},"название компании"),Object(n["j"])("th",null,"статус компании"),Object(n["j"])("th",null,"контакты"),Object(n["j"])("th",null,"брокер"),Object(n["j"])("th",null,"запросов"),Object(n["j"])("th",null,"сделок"),Object(n["j"])("th",null,"предложений")])],-1),w={class:"text-left name"},I={key:0,class:"text-danger"},x={class:"categories"},E={key:0,class:"d-inline-block"},S={key:1},_={class:"contacts"},M={key:0},A=Object(n["j"])("td",null,"Андреев В. И.",-1),P={class:"count"},F={class:"p-2"},V={class:"count"},R={class:"p-2"},N={class:"count"},T={class:"p-2"};function H(e,t,c,a,r,o){var l=Object(n["E"])("Progress"),j=Object(n["E"])("router-link");return Object(n["y"])(),Object(n["f"])("div",C,[Object(n["j"])("table",null,[k,Object(n["j"])("tbody",null,[(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["C"])(c.companies,(function(e){return Object(n["y"])(),Object(n["f"])("tr",{class:"text-center",key:e.id},[Object(n["j"])("td",null,Object(n["I"])(e.id),1),Object(n["j"])("td",w,[Object(n["j"])(j,{to:"/companies/"+e.id,target:"_blank"},{default:Object(n["R"])((function(){return[Object(n["i"])(Object(n["I"])(e.nameRu)+" "+Object(n["I"])(e.nameRu?" — ":"")+" "+Object(n["I"])(e.nameEng)+" ",1),e.nameRu?Object(n["g"])("",!0):(Object(n["y"])(),Object(n["f"])("p",I,"—")),Object(n["j"])(l,{percent:e.progress_percent},null,8,["percent"])]})),_:2},1032,["to"])]),Object(n["j"])("td",x,[e.categories.length?(Object(n["y"])(),Object(n["f"])("div",E,[(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["C"])(e.categories,(function(e){return Object(n["y"])(),Object(n["f"])("span",{key:e.id,class:"p-2 m-1 d-inline-block"},Object(n["I"])(o.category(e.category)),1)})),128))])):(Object(n["y"])(),Object(n["f"])("p",S,"—"))]),Object(n["j"])("td",_,[o.contacts(e.id)?Object(n["g"])("",!0):(Object(n["y"])(),Object(n["f"])("p",M,"—")),(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["C"])(o.contacts(e.id),(function(e){return Object(n["y"])(),Object(n["f"])("div",{key:e.id},[(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["C"])(e.emails,(function(e){return Object(n["y"])(),Object(n["f"])("a",{href:"mailto:"+e.email,key:e.email},Object(n["I"])(e.email),9,["href"])})),128)),(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["C"])(e.phones,(function(e){return Object(n["y"])(),Object(n["f"])("a",{href:"tel:"+e.phone,key:e.phone},Object(n["I"])(e.phone),9,["href"])})),128))])})),128))]),A,Object(n["j"])("td",P,[Object(n["j"])("span",F,Object(n["I"])(e.request_count),1)]),Object(n["j"])("td",V,[Object(n["j"])("span",R,Object(n["I"])(e.object_count),1)]),Object(n["j"])("td",N,[Object(n["j"])("span",T,Object(n["I"])(e.offer_count),1)])])})),128))])])])}c("7db0"),c("d81d");var G=c("ad18"),q=c("82d8"),z={name:"CompanyTableView",components:{Progress:G["a"]},data:function(){return{generalContacts:[]}},props:{companies:{type:Array}},computed:{},methods:{category:function(e){return q["a"].get("param")[e][1]},contacts:function(e){return this.generalContacts.find((function(t){return t.company_id==e}))},normalizeContacts:function(){var e=this;this.companies.map((function(t){t.contacts.map((function(c){1==c.type&&e.generalContacts.push({company_id:t.id,contact:c})}))}))}},mounted:function(){},watch:{companies:function(){this.normalizeContacts()}}};z.render=H;var D=z,J=c("555f"),L={class:"search row no-gutters"},K={class:"col-9 search-input p-3"},U=Object(n["j"])("label",{for:"search"},"Поиск компаний",-1),$=Object(n["j"])("p",null,"Введите: название компании, ID компании, адрес компании",-1),B={class:"col-3 search-button p-3 align-self-center"},Q=Object(n["j"])("hr",null,null,-1);function W(e,t,c,a,r,o){return Object(n["y"])(),Object(n["f"])("div",L,[Object(n["j"])("div",K,[U,Object(n["S"])(Object(n["j"])("input",{type:"text",id:"search",placeholder:"pennylane","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.param.searchText=e}),onKeyup:t[2]||(t[2]=Object(n["T"])((function(){return o.clickSearch&&o.clickSearch.apply(o,arguments)}),["enter"]))},null,544),[[n["O"],r.param.searchText,void 0,{trim:!0}]]),$]),Object(n["j"])("div",B,[Object(n["j"])("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=function(){return o.clickSearch&&o.clickSearch.apply(o,arguments)})},"Поиск")]),Q])}var X={name:"Search",data:function(){return{param:{searchText:""}}},methods:{clickSearch:function(){this.$emit("search",this.param)}}};X.render=W;var Y=X,Z=c("2c5c"),ee=c("5502"),te={name:"All",data:function(){return{loader:!0,companyFormVisible:!1,viewMode:!1}},components:{CompanyGridView:v["a"],CompanyTableView:D,Loader:J["a"],Search:Y,CompanyForm:Z["a"]},methods:Object(g["a"])(Object(g["a"])({},Object(ee["b"])(["FETCH_COMPANIES","SEARCH_COMPANIES"])),{},{getCompanies:function(){var e=arguments,t=this;return Object(h["a"])(regeneratorRuntime.mark((function c(){var n;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:if(n=e.length>0&&void 0!==e[0]?e[0]:null,t.loader=!0,n){c.next=7;break}return c.next=5,t.FETCH_COMPANIES();case 5:c.next=9;break;case 7:return c.next=9,t.SEARCH_COMPANIES(n);case 9:console.log(t.COMPANIES[0]),t.loader=!1;case 11:case"end":return c.stop()}}),c)})))()},clickSearch:function(e){console.log(e),this.getCompanies(e)},clickCloseCompanyForm:function(){this.companyFormVisible=!1},createdCompany:function(){this.getCompanies()}}),computed:Object(g["a"])({},Object(ee["c"])(["COMPANIES"])),created:function(){this.getCompanies()}};te.render=y;t["default"]=te},a73e:function(e,t,c){"use strict";var n=c("7a23"),a={class:"objects-grid"},r={class:"row no-gutters"},o={class:"row no-gutters card"},l={class:"row"},j={class:"col-12 id"},s=Object(n["j"])("p",null,"ID:",-1),i={class:"col-12 title text-center mt-1 mb-1"},b={class:"col-12 pt-1 footer align-self-end"},O={class:"col-lg-8 col-12 card-right pr-4 pl-4 pt-3 pb-3 d-flex"},u={class:"row no-gutters"},d={class:"col-12"},p={class:"row no-gutters header"},m={class:"col-lg-7 col-5 category"},f={class:"col-lg-5 col-7 text-right pt-1"},y={class:"col-12"},h={class:"row no-gutters contact-list mt-1 mb-1"},g={key:0,class:"text-center not-contacts"},v={class:"row no-gutters"},C={class:"col-12"},k={class:"row"},w={class:"col-12 text-center name"},I={class:"col-6 contact-data text-center text-lg-left"},x={class:"\r\n                          col-6\r\n                          contact-data\r\n                          text-center text-lg-right\r\n                          pr-1\r\n                        "},E={class:"col-12 align-self-end mt-2"},S={class:"row no-gutters footer"},_={class:"col-12 text-lg-left text-right"},M={class:"mr-2"},A={class:"mr-2"},P={class:"mr-lg-0 mr-2"},F=Object(n["j"])("p",{class:"mr-lg-0 mr-2 broker"}," брокер: Котлинов Павел Джавович ",-1);function V(e,t,c,V,R,N){var T=Object(n["E"])("router-link"),H=Object(n["E"])("Progress");return Object(n["y"])(),Object(n["f"])("div",a,[Object(n["j"])("div",r,[(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["C"])(c.companies,(function(e){return Object(n["y"])(),Object(n["f"])("div",{key:e.id,class:["col-lg-4 col-md-6 col-12 object-grid-item pr-4 mb-4",{inactive:0==e.active}]},[Object(n["j"])("div",o,[Object(n["j"])(T,{tag:"div",to:"/companies/"+e.id,class:"col-lg-4 col-12 d-flex card-left pr-4 pl-4 pt-3 pb-3",target:"_blank"},{default:Object(n["R"])((function(){return[Object(n["j"])("div",l,[Object(n["j"])("div",j,[s,Object(n["j"])("span",null,Object(n["I"])(e.id),1)]),Object(n["j"])("div",i,[Object(n["j"])("h3",null,Object(n["I"])(e.nameRu)+" - "+Object(n["I"])(e.nameEng),1)]),Object(n["j"])("div",b,[Object(n["j"])("p",null,Object(n["I"])(e.created_at),1)])])]})),_:2},1032,["to"]),Object(n["j"])("div",O,[Object(n["j"])("div",u,[Object(n["j"])("div",d,[Object(n["j"])("div",p,[Object(n["j"])("div",m,[(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["C"])(e.categories,(function(e){return Object(n["y"])(),Object(n["f"])("p",{key:e.id,class:"mr-1"},Object(n["I"])(N.category(e.category)),1)})),128))]),Object(n["j"])("div",f,[Object(n["j"])(H,{percent:e.progress_percent},null,8,["percent"])])])]),Object(n["j"])("div",y,[Object(n["j"])("div",h,[e.contacts[0]?Object(n["g"])("",!0):(Object(n["y"])(),Object(n["f"])("p",g," нет контактов ")),(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["C"])(e.contacts,(function(e){return Object(n["y"])(),Object(n["f"])("div",{class:["col-12 contact-list-item",{inactive:0==e.status}],title:e.first_name+" "+e.middle_name+" "+e.last_name+"\n"+e.comment,key:e.phone},[Object(n["j"])("div",v,[Object(n["j"])("div",C,[Object(n["j"])("div",k,[Object(n["j"])("div",w,[Object(n["j"])("p",null,Object(n["I"])(e.first_name+" "+e.middle_name),1)])])]),Object(n["j"])("div",I,[(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["C"])(e.emails,(function(e){return Object(n["y"])(),Object(n["f"])("a",{href:"mailto:"+e.email,key:e.email},Object(n["I"])(e.email),9,["href"])})),128))]),Object(n["j"])("div",x,[(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["C"])(e.phones,(function(e){return Object(n["y"])(),Object(n["f"])("a",{href:"tel:"+e.phone,key:e.phone},Object(n["I"])(e.phone),9,["href"])})),128))])])],10,["title"])})),128))])]),Object(n["j"])("div",E,[Object(n["j"])("div",S,[Object(n["j"])("div",_,[Object(n["j"])("p",M,"ЗАПРОСЫ: "+Object(n["I"])(e.request_count),1),Object(n["j"])("p",A,"ПРЕДЛОЖЕНИЯ: "+Object(n["I"])(e.offer_count),1),Object(n["j"])("p",P," СДЕЛКИ: "+Object(n["I"])(e.object_count),1),F])])])])])])],2)})),128))])])}var R=c("82d8"),N=c("ad18"),T={name:"CompanyGridView",components:{Progress:N["a"]},props:{companies:{type:Array}},methods:{percentClass:function(e){return e<30?"bg-danger":e<60?"bg-warning":e<90?"bg-primary":e<=100?"bg-success":void 0},category:function(e){return R["a"].get("param")[e][1]}}};T.render=V;t["a"]=T}}]);
//# sourceMappingURL=chunk-58f3e4ca.9b464da9.js.map